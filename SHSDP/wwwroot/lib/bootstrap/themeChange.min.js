import{blazorLoaded}from"../../js/general.min.js";(()=>{"use strict";const getStoredTheme=()=>localStorage.getItem("theme");const setStoredTheme=theme=>localStorage.setItem("theme",theme);const getPreferredTheme=()=>{const storedTheme=getStoredTheme();if(storedTheme){return storedTheme}return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"};const setTheme=theme=>{let colorSubscribers=document.getElementsByClassName("c-sub");if(theme==="auto"){for(let i=0;i<colorSubscribers.length;i++){if(colorSubscribers[i].classList.contains("d-none")&&colorSubscribers[i].classList.contains("d-auto-only")){colorSubscribers[i].classList.remove("d-none")}else if(colorSubscribers[i].classList.contains("d-none")===false&&(colorSubscribers[i].classList.contains("d-light-only")||colorSubscribers[i].classList.contains("d-dark-only"))){colorSubscribers[i].classList.add("d-none")}}}else if(theme==="light"){for(let i=0;i<colorSubscribers.length;i++){if(colorSubscribers[i].classList.contains("d-none")&&colorSubscribers[i].classList.contains("d-light-only")){colorSubscribers[i].classList.remove("d-none")}else if(colorSubscribers[i].classList.contains("d-none")===false&&(colorSubscribers[i].classList.contains("d-auto-only")||colorSubscribers[i].classList.contains("d-dark-only"))){colorSubscribers[i].classList.add("d-none")}}}else if(theme==="dark"){for(let i=0;i<colorSubscribers.length;i++){if(colorSubscribers[i].classList.contains("d-none")&&colorSubscribers[i].classList.contains("d-dark-only")){colorSubscribers[i].classList.remove("d-none")}else if(colorSubscribers[i].classList.contains("d-none")===false&&(colorSubscribers[i].classList.contains("d-auto-only")||colorSubscribers[i].classList.contains("d-light-only"))){colorSubscribers[i].classList.add("d-none")}}}if(theme==="auto"){document.documentElement.setAttribute("data-bs-theme",window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")}else{document.documentElement.setAttribute("data-bs-theme",theme)}};const showActiveTheme=(theme,focus=false)=>{const themeSwitcher=document.querySelector("#bd-theme");if(!themeSwitcher){return}const themeSwitcherText=document.querySelector("#bd-theme-text");const btnToActive=document.querySelector(`[data-bs-theme-value="${theme}"]`);document.querySelectorAll("[data-bs-theme-value]").forEach(element=>{element.classList.remove("active");element.setAttribute("aria-pressed","false")});btnToActive.classList.add("active");btnToActive.setAttribute("aria-pressed","true");const themeSwitcherLabel=`${themeSwitcherText.textContent} (${btnToActive.dataset.bsThemeValue})`;themeSwitcher.setAttribute("aria-label",themeSwitcherLabel);if(focus){themeSwitcher.focus()}};window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",()=>{const storedTheme=getStoredTheme();if(storedTheme!=="light"&&storedTheme!=="dark"){setTheme(getPreferredTheme())}});window.addEventListener("DOMContentLoaded",()=>{pollUntilBlazorLoaded()});const observer=new MutationObserver(function(mutations){setTheme(getPreferredTheme());prepareThemeSwitcher()});const config={subtree:true,childList:true,characterData:true};observer.observe(document,config);const pollUntilBlazorLoaded=()=>{if(blazorLoaded){setTheme(getPreferredTheme());prepareThemeSwitcher()}else{setTimeout(pollUntilBlazorLoaded,100)}};const prepareThemeSwitcher=()=>{showActiveTheme(getPreferredTheme());document.querySelectorAll("[data-bs-theme-value]").forEach(toggle=>{toggle.addEventListener("click",()=>{const theme=toggle.getAttribute("data-bs-theme-value");setStoredTheme(theme);setTheme(theme);showActiveTheme(theme,true)})})}})();